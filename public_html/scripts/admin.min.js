var config={apiKey:"AIzaSyB375ZkbrouviVJ1YG7_3n8K3jAhIXlsOU",authDomain:"amu-roboclub.firebaseapp.com",databaseURL:"https://amu-roboclub.firebaseio.com",storageBucket:"amu-roboclub.appspot.com",messagingSenderId:"911524271284"};firebase.initializeApp(config);function savetoDatabase(b){firebase.database().ref("users/"+b.uid).set(b).then(function(){console.log("Synchronization succeeded")})["catch"](function(b){console.log("Synchronization failed")})}
function toggleVisibility(b,c){c.style.display=b?"block":"none"}function updateProfile(b,c){var d=firebase.auth().currentUser;d?d.updateProfile({displayName:b,photoURL:c}).then(function(){alert("Settings Saved!")},function(a){alert(a)}):alert("You're logged out!")}
function loadProfileSettings(b,c,d){var a=document.getElementById("inputName"),e=document.getElementById("select");option=document.createElement("option");option.value=c;option.text="Default Photo (Current)";e.options.add(option);d.forEach(function(a){option=document.createElement("option");option.value=a.photoURL;option.text=a.providerId;e.options.add(option)});e.onchange=function(){avatar.src="null"!=this.value?this.value:"https://res.cloudinary.com/amuroboclub/image/upload/person.svg"};a.value=
b;document.getElementById("profile-form").onsubmit=function(){updateProfile(a.value,e.options.item(e.options.selectedIndex).value);return!1}}
function initApp(){var b=document.getElementById("sign-in"),c=document.getElementById("welcome"),d=document.getElementById("profile-info");firebase.auth().onAuthStateChanged(function(a){if(a){var e=document.getElementById("avatar"),f={name:a.displayName,email:a.email,emailVerified:a.emailVerified,photoURL:a.photoURL,uid:a.uid,providerData:a.providerData};savetoDatabase(f);null!=a.photoURL&&"null"!=a.photoURL&&(e.src=f.photoURL);c.textContent="Welcome, "+f.name;b.textContent="Sign out";b.onclick=function(){firebase.auth().signOut()};
var g=!0;document.getElementById("change-profile").onclick=function(){toggleVisibility(g,document.getElementById("profile-form"));g=!g};toggleVisibility(!0,d);loadProfileSettings(a.displayName,a.photoURL,a.providerData)}else b.textContent="Sign in",c.textContent="You're signed out!",b.onclick=function(){location.href="./signin"},toggleVisibility(!1,d)},function(a){console.log(a)})}window.addEventListener("load",function(){initApp()});